---
title: "Accidents de la route caractéristiques"
author: "Valentin Henriot"
date: "5/16/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r message=FALSE}
library(readr)
library(dplyr)
library(tidyr)
library(ggplot2)
```

```{r message=FALSE}
AccidentCarac <- read_csv("https://www.data.gouv.fr/fr/datasets/r/6eee0852-cbd7-447e-bd70-37c433029405")
```

```{r}
AccidentCarac$lum <- as.factor(AccidentCarac$lum)
AccidentCarac$agg <- as.factor(AccidentCarac$agg)
AccidentCarac$int <- as.factor(AccidentCarac$int)
AccidentCarac$atm <- as.factor(AccidentCarac$atm)
AccidentCarac$col <- as.factor(AccidentCarac$col)

AccidentCarac$lum <- recode(AccidentCarac$lum, "1" = "Plein jour", "2" = "Crépuscule ou aube", "3" = "Nuit sans éclairage public", "4" = "Nuit avec éclairage public non allumé", "5" = "Nuit avec éclairage public allumé")

AccidentCarac$agg <- recode(AccidentCarac$agg, "1" = "Hors agglo", "2" = "Agglo")

AccidentCarac$int <- recode(AccidentCarac$int, "1" = "Hors intersection", "2" = "Intersection en X", "3" = "Intersection en T", "4" ="Intersection en Y", "5" = "Intersection plus de 4 branches", "6" = "Giratoire", "7" = "Place", "8" = "Passage à niveau", "9" = "Autre intersection")

AccidentCarac$atm <- recode(AccidentCarac$atm, "1" = "Normale", "2" = "Pluie légère", "3" = "Pluie forte", "4" = "Neige / Grêle", "5" = "Brouillard / Fumée", "6" = "Vent fort / Tempête", "7" = "Temps éblouissant", "8" = "Temps couvert", "9" = "Autre")

AccidentCarac$col <- recode(AccidentCarac$col, "1" = "Deux VL - frontale", "2" = "Deux VL - par l'arrière", "3" = "Deux VL - par le côté", "4" = "Trois VL ou plus - en chaîne", "5" = "Trois VL ou plus - collisions multiples", "6" = "Autre collison", "7" = "Sans collision")
```

```{r message=FALSE}
AccidentUsager <- read_csv("https://www.data.gouv.fr/fr/datasets/r/72b251e1-d5e1-4c46-a1c2-c65f1b26549a")
```

```{r}
AccidentJoin <- left_join(AccidentCarac, AccidentUsager, by = "Num_Acc")
```

